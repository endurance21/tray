{"ast":null,"code":"var _jsxFileName = \"/home/endurance21/tray/reactapp/src/views/orders/index.js\";\nimport React from 'react';\nimport Styles from './main.module.css';\nimport ChooseCanteen from '../canteens/chooseCanteen';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Item from '../items/index';\n\nvar axios = require('axios');\n\nvar canteen_id = '';\nvar order_name;\nvar object = [];\nvar order_hash = '';\nexport default class OrderPage extends React.Component {\n  constructor(props) {\n    super();\n\n    this.setCanteenId = value => {\n      canteen_id = value;\n      console.log(value);\n      this.setState({\n        canteenId: value\n      });\n      console.log(this.state.canteenId); //   console.log(value)\n    };\n\n    this.update = (update, itemId) => {\n      // this.setState({\n      // })\n      object[itemId - 1].quantity = update + 1;\n      console.log(object);\n    };\n\n    this.createOrder = () => {\n      console.log(canteen_id);\n      let user = JSON.parse(localStorage.getItem('user'));\n      let groups = JSON.parse(localStorage.getItem('groups'));\n      let url = \"http://localhost:3005/api/orders/create\"; // console.log(user, groups);\n\n      let data = {\n        order_name: order_Name,\n        user_id: user.userId,\n        group_code: groups.groupcode,\n        canteen_id: canteen_id,\n        item_id: 0\n      };\n      console.log(data);\n      axios.post(url, data).then(res => {\n        console.log(res.body);\n      });\n      this.fetchItems();\n    };\n\n    this.setOrderName = value => {\n      order_name = value;\n      console.log(order_name);\n      this.setState({\n        orderName: value\n      });\n    };\n\n    this.fetchItems = () => {\n      let url = \"http://localhost:3005/api/canteens/\" + \"rajeev_item_list\";\n      let data = {\n        canteen_id: canteen_id + 1\n      };\n      axios.get(url).then(res => {\n        console.log(res);\n\n        for (let i = 0; i < res.data.length; i++) {\n          object.push({\n            item_id: res.data[i].item_id,\n            item_name: res.data[i].item_name,\n            item_price: res.data[i].item_price,\n            quantity: 0\n          });\n          console.log(object); // var Items = function(){\n          //     return(\n          //         object.map((object,index)=>(\n          //             <Item itemId = {Object.item_id} price = {Object.item_price} description = {Object.item_name} ></Item>\n          //         ))\n          //     )\n          // }\n\n          this.setState({\n            items: object.map((object, index) => React.createElement(Item, {\n              itemId: object.item_id,\n              price: object.item_price,\n              description: object.item_name,\n              update: this.update,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 104\n              },\n              __self: this\n            }))\n          });\n        }\n      });\n    };\n\n    this.getOrderId = () => {\n      let url = \"http://localhost:3005/api/order/orderId\";\n      let data = {\n        order_name: this.state.orderName\n      };\n      axios.post(url, data).then(res => {\n        console.log(res.body);\n      });\n    };\n\n    this.submit = () => {\n      this.setState({\n        myorders: object.map((item, index) => React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \" \", item.item_name, \" :\", item.quantity))\n      });\n      let url = \"http://localhost:3005/api/orders/additem\";\n      let user = JSON.parse(localStorage.getItem('user')); //  object.map((item, index)=>{\n      //     let data = {\n      //         order_id:,\n      //         user_id:user.userId,\n      //         canteen_id:canteen_id,\n      //         item_id:(index+1)\n      //     } ;\n      //     axios.patch(url,data).then((res)=>{\n      //         console.log(res.body);\n      //     })\n      //  })\n\n      this.getOrderId();\n    };\n\n    console.log(props);\n    this.state = {\n      canteenId: '',\n      orderName: '',\n      myorders: ''\n    };\n  }\n\n  render() {\n    console.log(this.props.groupCode);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/orderPage\",\n      exact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(ChooseCanteen, {\n      setCanteenId: this.setCanteenId,\n      setOrderName: this.setOrderName,\n      createOrder: this.createOrder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), this.state.canteenId ? this.state.canteenId : '', this.state.orderName ? this.state.orderName : ''), React.createElement(Route, {\n      path: \"/orderPage/order\",\n      exact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, this.props.groupCode ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"YOUR GROUP CODE IS : \", this.props.groupCode) : '', React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \" your ORDER NAME IS : \", order_name), React.createElement(\"div\", {\n      className: Styles.myorders,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Final Order Will APPEAR HERE\", this.state.myorders), React.createElement(\"div\", {\n      className: Styles.itemList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \":::::::CHOOSE YOUR ITEMS ::::::::\", React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, this.state.items)), React.createElement(\"button\", {\n      className: Styles.submit,\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"SUBMIT MY ORDER\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/endurance21/tray/reactapp/src/views/orders/index.js"],"names":["React","Styles","ChooseCanteen","BrowserRouter","Router","Route","Item","axios","require","canteen_id","order_name","object","order_hash","OrderPage","Component","constructor","props","setCanteenId","value","console","log","setState","canteenId","state","update","itemId","quantity","createOrder","user","JSON","parse","localStorage","getItem","groups","url","data","order_Name","user_id","userId","group_code","groupcode","item_id","post","then","res","body","fetchItems","setOrderName","orderName","get","i","length","push","item_name","item_price","items","map","index","getOrderId","submit","myorders","item","render","groupCode","itemList"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Styles from './main.module.css'\r\nimport ChooseCanteen from '../canteens/chooseCanteen';\r\nimport {BrowserRouter as Router  , Route} from 'react-router-dom'\r\nimport Item from '../items/index'\r\nvar axios  = require('axios')\r\n\r\nvar canteen_id = '' ;\r\nvar order_name;\r\nvar object = [];\r\nvar order_hash = ''\r\nexport default class OrderPage extends React.Component{\r\n    constructor(props){\r\n        super();\r\n          console.log(props)\r\n        this.state = {\r\n            canteenId:'',\r\n            orderName:'',\r\n            myorders:''\r\n        }\r\n    }\r\n\r\n    setCanteenId = (value)=>{\r\n\r\n        canteen_id = value;\r\n        console.log(value)\r\n        this.setState({\r\n            canteenId:value\r\n        })\r\n\r\n        console.log(this.state.canteenId)\r\n\r\n    //   console.log(value)\r\n    }\r\n\r\n    update = (update, itemId)=>{\r\n            // this.setState({\r\n\r\n            // })\r\n\r\n\r\n            object[itemId-1].quantity = update + 1 ;\r\n\r\n            console.log(object)\r\n    }\r\n\r\n    createOrder = ()=>{\r\n        console.log(canteen_id)\r\n        let user  = JSON.parse(localStorage.getItem('user'));\r\n        let groups = JSON.parse(localStorage.getItem('groups'));\r\n        let url  = \"http://localhost:3005/api/orders/create\";\r\n        // console.log(user, groups);\r\n        \r\n        let data = {\r\n                order_name:order_Name,\r\n                user_id:user.userId,\r\n                group_code:groups.groupcode,\r\n                canteen_id:canteen_id,\r\n                item_id:0\r\n        }\r\n\r\n        console.log(data)\r\n        axios.post(url, data).then((res)=>{\r\n               console.log(res.body)\r\n        })\r\n        this.fetchItems();\r\n    }\r\n\r\n    setOrderName = (value)=>{\r\n        order_name = value;\r\n        console.log(order_name)\r\n\r\n        this.setState({\r\n            orderName:value\r\n        })\r\n    }\r\n\r\n\r\n    fetchItems =()=>{\r\n        let url  = \"http://localhost:3005/api/canteens/\" + \"rajeev_item_list\";\r\n        let data = {\r\n            canteen_id:(canteen_id+1)\r\n        }\r\n        axios.get(url).then((res)=>{\r\n            console.log(res);\r\n            for (let i = 0; i < res.data.length; i++) {\r\n                object.push({\r\n                    item_id : res.data[i].item_id ,\r\n                    item_name : res.data[i].item_name,\r\n                    item_price : res.data[i].item_price,\r\n                    quantity:0\r\n                });\r\n                console.log(object);\r\n\r\n                // var Items = function(){\r\n                //     return(\r\n                //         object.map((object,index)=>(\r\n                //             <Item itemId = {Object.item_id} price = {Object.item_price} description = {Object.item_name} ></Item>\r\n                //         ))\r\n                //     )\r\n                // }\r\n                this.setState({\r\n                    items: object.map((object,index)=>(\r\n                        <Item itemId = {object.item_id} price = {object.item_price} description = {object.item_name}  update = {this.update}></Item>\r\n                    ))\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getOrderId = ()=>{\r\n        let url  = \"http://localhost:3005/api/order/orderId\";\r\n        let data = {\r\n          order_name:this.state.orderName\r\n\r\n        }\r\n\r\n        axios.post(url, data).then((res)=>{\r\n                 console.log(res.body)\r\n        })\r\n    }\r\n\r\n    submit  = ()=>{\r\n         this.setState({\r\n             myorders:object.map((item,index)=>(\r\n                 <li> {item.item_name} :{item.quantity}</li>\r\n             ))\r\n         });\r\n         let url  = \"http://localhost:3005/api/orders/additem\" ;\r\n         let user =  JSON.parse(localStorage.getItem('user'));\r\n\r\n        //  object.map((item, index)=>{\r\n        //     let data = {\r\n        //         order_id:,\r\n        //         user_id:user.userId,\r\n        //         canteen_id:canteen_id,\r\n        //         item_id:(index+1)\r\n        //     } ;\r\n        //     axios.patch(url,data).then((res)=>{\r\n        //         console.log(res.body);\r\n        //     })\r\n        //  })\r\n\r\n        this.getOrderId();\r\n        \r\n    }\r\n\r\n    render(){\r\n        console.log(this.props.groupCode)\r\n        return (\r\n            <div>\r\n            <Router>\r\n                <Route path=\"/orderPage\" exact>\r\n                <ChooseCanteen setCanteenId = {this.setCanteenId} setOrderName = {this.setOrderName}  createOrder = {this.createOrder}></ChooseCanteen>\r\n                { (this.state.canteenId)?this.state.canteenId:''}\r\n                { (this.state.orderName)?this.state.orderName:''}\r\n\r\n            </Route>\r\n            <Route path = \"/orderPage/order\" exact>\r\n               { (this.props.groupCode)?(<div>YOUR GROUP CODE IS : {this.props.groupCode}</div>):''}\r\n               \r\n                <div> your ORDER NAME IS : {order_name}</div>\r\n                <div className={Styles.myorders}> \r\n                Final Order Will APPEAR HERE\r\n                   {this.state.myorders}\r\n               </div>\r\n                <div className={Styles.itemList}>\r\n                    :::::::CHOOSE YOUR ITEMS ::::::::\r\n                   <ul>\r\n                       {this.state.items}\r\n                   </ul>\r\n                  \r\n               </div>\r\n\r\n   \r\n               <button className ={Styles.submit} onClick= {this.submit}>SUBMIT MY ORDER</button>\r\n\r\n            </Route>\r\n\r\n\r\n            </Router>\r\n            \r\n            </div>\r\n        )\r\n    } \r\n}"]},"metadata":{},"sourceType":"module"}