{"ast":null,"code":"var _jsxFileName = \"/home/endurance21/tray/reactapp/src/views/orders/index2.js\";\nimport React from 'react';\nimport Styles from './main.module.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Item from '../items/index';\n\nvar axios = require('axios');\n\nvar canteen_id = '';\nvar order_name = '';\nvar object = [];\nvar order_hash = '';\nvar order_id = '';\nvar numberOfSubmi = 0;\nexport default class OrderPage2 extends React.Component {\n  constructor(props) {\n    super();\n\n    this.update = (update, itemId) => {\n      object[itemId - 1].quantity = update + 1;\n      console.log(object);\n    };\n\n    this.fetchItems = () => {\n      let url2 = \"http://localhost:3005/api/getgroupid\";\n      var user = JSON.parse(localStorage.getItem('user'));\n      let data2 = {\n        member_id: user.userId\n      };\n      axios.post(url2, data2).then(res => {\n        let group_id = res.data.group_id;\n        let url = \"http://localhost:3005/api/getinfo\";\n        axios.post(url, {\n          group_id: group_id\n        }).then(res => {\n          let data = res.data;\n          this.setState({\n            userData: data\n          });\n          let url = \"http://localhost:3005/api/canteens/\" + \"rajeev_item_list\";\n          let data2 = {\n            canteen_id: data.canteen_id\n          };\n          axios.get(url).then(res => {\n            for (let i = 0; i < res.data.length; i++) {\n              object.push({\n                item_id: res.data[i].item_id,\n                item_name: res.data[i].item_name,\n                item_price: res.data[i].item_price,\n                quantity: 0\n              });\n              this.setState({\n                items: object.map((object, index) => React.createElement(Item, {\n                  itemId: object.item_id,\n                  price: object.item_price,\n                  description: object.item_name,\n                  update: this.update,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 59\n                  },\n                  __self: this\n                }))\n              });\n            }\n          });\n        });\n      });\n    };\n\n    this.state = {\n      myorders: '',\n      items: '',\n      userData: ''\n    };\n  }\n\n  componentDidMount() {\n    this.fetchItems();\n  } //     submit  = ()=>{\n  //         numberOfSubmit++;\n  //         let user =  JSON.parse(localStorage.getItem('user'));\n  //         let deleteurl = \"http://localhost:3005/api/orders/deleteitem\";\n  //         if(numberOfSubmit>1)\n  //         object.map((item, index)=>{\n  //             let data = {\n  //                 order_id:order_id,\n  //                 user_id:user.userId,\n  //                 canteen_id:canteen_id,\n  //                 item_id:(index+1),\n  //             } ;\n  //             axios.post(deleteurl,data).then((res)=>{\n  //                 console.log(res.data);\n  //             })\n  //          })\n  //         this.setState({\n  //             myorders:object.map((item,index)=>(\n  //                 <li> {item.item_name} :{item.quantity}</li>\n  //             ))\n  //         });\n  //         // let user =  JSON.parse(localStorage.getItem('user'));\n  //        //  this.getOrderId();\n  //         let url2 = \"http://localhost:3005/api/getgroupid\";\n  //         var user =  JSON.parse(localStorage.getItem('user'));\n  //        let data2 ={\n  //            member_id:user.userId\n  //        }\n  //        axios.post(url2 ,data2).then((res)=>{\n  //         let group_id = res.data.group_id;\n  //         console.log(res.data)\n  //         let url = \"http://localhost:3005/api/getinfo\";\n  //         axios.post(url,{group_id:group_id}).then((res)=>{\n  //             console.log(res)\n  //             let data  = res.data;\n  //             let url3  = \"http://localhost:3005/api/order/orderId\";\n  //             let data3 = {\n  //               order_name:order_name\n  //             }\n  //             console.log(data)\n  //             axios.post(url3, data3).then((res)=>{\n  //                 let url  = \"http://localhost:3005/api/orders/additem\" ;\n  //                 object.map((item, index)=>{\n  //                   let data4 = {\n  //                       order_id:(data[0].order_id+1),\n  //                       user_id:user.userId,\n  //                       canteen_id:data[0].canteen_id,\n  //                       item_id:(index+1),\n  //                       quantity:item.quantity\n  //                   } ;\n  //                   axios.post(url,data4).then((res)=>{\n  //                       console.log(res.data);\n  //                       alert(res.data)\n  //                   })\n  //                })\n  //        })\n  //         })\n  //     });\n  //        // this.getOrderId();\n  //    }\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \" your ORDER NAME IS : \", this.props.order_name), React.createElement(\"div\", {\n      className: Styles.myorders,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Final Order Will APPEAR HERE\", this.state.myorders), React.createElement(\"div\", {\n      className: Styles.itemList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \":::::::CHOOSE YOUR ITEMS ::::::::\", React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, this.state.items)), React.createElement(\"button\", {\n      className: Styles.submit,\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"SUBMIT MY ORDER\"));\n  }\n\n}","map":{"version":3,"sources":["/home/endurance21/tray/reactapp/src/views/orders/index2.js"],"names":["React","Styles","BrowserRouter","Router","Route","Item","axios","require","canteen_id","order_name","object","order_hash","order_id","numberOfSubmi","OrderPage2","Component","constructor","props","update","itemId","quantity","console","log","fetchItems","url2","user","JSON","parse","localStorage","getItem","data2","member_id","userId","post","then","res","group_id","data","url","setState","userData","get","i","length","push","item_id","item_name","item_price","items","map","index","state","myorders","componentDidMount","render","itemList","submit"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Styles from './main.module.css'\r\nimport {BrowserRouter as Router  , Route} from 'react-router-dom'\r\nimport Item from '../items/index'\r\nvar axios  = require('axios')\r\nvar canteen_id = '' ;\r\nvar order_name = '';\r\nvar object = [];\r\nvar order_hash = ''\r\nvar order_id = ''\r\nvar numberOfSubmi = 0;\r\nexport default class OrderPage2 extends React.Component{\r\n    constructor(props){\r\n        super();\r\n        this.state= {\r\n            myorders:'',\r\n            items:'',\r\n            userData:''\r\n        }\r\n    }\r\n    update = (update, itemId)=>{\r\n    \r\n        object[itemId-1].quantity = update + 1 ;\r\n\r\n        console.log(object)\r\n}\r\n    fetchItems =()=>{\r\n\r\n        let url2 = \"http://localhost:3005/api/getgroupid\";\r\n        var user =  JSON.parse(localStorage.getItem('user'));\r\n       let data2 ={\r\n           member_id:user.userId\r\n       }\r\n\r\n       axios.post(url2 ,data2).then((res)=>{\r\n           let group_id = res.data.group_id;\r\n           let url = \"http://localhost:3005/api/getinfo\";\r\n           axios.post(url,{group_id:group_id}).then((res)=>{\r\n               let data  = res.data;\r\n               this.setState({\r\n                   userData:data\r\n               })\r\n\r\n               let url  = \"http://localhost:3005/api/canteens/\" + \"rajeev_item_list\";\r\n               let data2 = {\r\n                canteen_id:data.canteen_id\r\n                }\r\n                axios.get(url).then((res)=>{\r\n                    for (let i = 0; i < res.data.length; i++) {\r\n                        object.push({\r\n                            item_id : res.data[i].item_id ,\r\n                            item_name : res.data[i].item_name,\r\n                            item_price : res.data[i].item_price,\r\n                            quantity:0\r\n                        });\r\n                       \r\n                        this.setState({\r\n                            items: object.map((object,index)=>(\r\n                                <Item itemId = {object.item_id} price = {object.item_price} description = {object.item_name}  update = {this.update}></Item>\r\n                            ))\r\n                        })\r\n                    }\r\n                })\r\n\r\n\r\n\r\n           })\r\n       })\r\n\r\n\r\n        \r\n        \r\n    }\r\n    componentDidMount(){\r\n        this.fetchItems();\r\n\r\n    }\r\n\r\n\r\n//     submit  = ()=>{\r\n\r\n\r\n//         numberOfSubmit++;\r\n//         let user =  JSON.parse(localStorage.getItem('user'));\r\n//         let deleteurl = \"http://localhost:3005/api/orders/deleteitem\";\r\n\r\n//         if(numberOfSubmit>1)\r\n//         object.map((item, index)=>{\r\n//             let data = {\r\n//                 order_id:order_id,\r\n//                 user_id:user.userId,\r\n//                 canteen_id:canteen_id,\r\n//                 item_id:(index+1),\r\n//             } ;\r\n//             axios.post(deleteurl,data).then((res)=>{\r\n//                 console.log(res.data);\r\n//             })\r\n//          })\r\n\r\n\r\n//         this.setState({\r\n//             myorders:object.map((item,index)=>(\r\n//                 <li> {item.item_name} :{item.quantity}</li>\r\n//             ))\r\n//         });\r\n//         // let user =  JSON.parse(localStorage.getItem('user'));\r\n//        //  this.getOrderId();\r\n        \r\n\r\n//         let url2 = \"http://localhost:3005/api/getgroupid\";\r\n//         var user =  JSON.parse(localStorage.getItem('user'));\r\n//        let data2 ={\r\n//            member_id:user.userId\r\n//        }\r\n//        axios.post(url2 ,data2).then((res)=>{\r\n//         let group_id = res.data.group_id;\r\n//         console.log(res.data)\r\n\r\n//         let url = \"http://localhost:3005/api/getinfo\";\r\n//         axios.post(url,{group_id:group_id}).then((res)=>{\r\n//             console.log(res)\r\n//             let data  = res.data;\r\n//             let url3  = \"http://localhost:3005/api/order/orderId\";\r\n//             let data3 = {\r\n//               order_name:order_name\r\n    \r\n//             }\r\n//             console.log(data)\r\n\r\n//             axios.post(url3, data3).then((res)=>{\r\n//                 let url  = \"http://localhost:3005/api/orders/additem\" ;\r\n\r\n//                 object.map((item, index)=>{\r\n//                   let data4 = {\r\n//                       order_id:(data[0].order_id+1),\r\n//                       user_id:user.userId,\r\n//                       canteen_id:data[0].canteen_id,\r\n//                       item_id:(index+1),\r\n//                       quantity:item.quantity\r\n//                   } ;\r\n//                   axios.post(url,data4).then((res)=>{\r\n//                       console.log(res.data);\r\n//                       alert(res.data)\r\n//                   })\r\n//                })\r\n      \r\n\r\n//        })\r\n\r\n//         })\r\n//     });\r\n\r\n       \r\n       \r\n//        // this.getOrderId();\r\n       \r\n//    }\r\n\r\n\r\n\r\n\r\n    render(){\r\n\r\n        return (\r\n\r\n            <div>\r\n                <div> your ORDER NAME IS : {this.props.order_name}</div>\r\n                <div className={Styles.myorders}> \r\n                Final Order Will APPEAR HERE\r\n                   {this.state.myorders}\r\n               </div>\r\n                <div className={Styles.itemList}>\r\n                    :::::::CHOOSE YOUR ITEMS ::::::::\r\n                   <ul>\r\n                       {this.state.items}\r\n                   </ul>\r\n                  \r\n               </div>\r\n\r\n   \r\n               <button className ={Styles.submit} onClick= {this.submit}>SUBMIT MY ORDER</button>\r\n       </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}